# Правила работы AI-ассистента для TRYGO - BusinessHypothesis Generator

## Основные правила работы

### Правило №1: НЕ разрабатывать ничего, не уточнив все детали
- Перед созданием любого файла, прототипа или кода ОБЯЗАТЕЛЬНО уточнить все детали задачи
- Задавать уточняющие вопросы о функционале, требованиях и предпочтениях
- Не делать предположений - всегда спрашивать

### Правило №2: Сначала прототип, а потом разработка
- Создание визуального прототипа интерфейса - ОБЯЗАТЕЛЬНЫЙ этап
- Функционал добавляется ТОЛЬКО после согласования прототипа с заказчиком
- Прототипирование позволяет избежать переделок и ускорить процесс

### Правило №3: Используем SSH для обмена файлами
- Все файлы разработки хранятся в папке `plagin dev/business-hypothesis-generator`
- Обновление файлов на хостинге происходит через SSH-соединение
- Каждый плагин имеет отдельную подпапку в `plagin dev`

## Специфичные правила для BusinessHypothesis Generator

### Правило №4: Структура бизнес-гипотез
- Генерировать 5 уникальных бизнес-гипотез на основе анализа веб-сайта
- Типы гипотез определяются настраиваемым промптом в админке
- Каждая гипотеза выводится в виде отдельной карточки
- Все гипотезы с кнопками копирования

### Правило №5: Формат гипотез
Каждая гипотеза должна содержать:
- **title** - краткое название гипотезы
- **description** - подробное описание
- **test_method** - метод тестирования гипотезы
- **success_metrics** - метрики успеха

### Правило №6: Входные данные
Для генерации гипотез требуется:
- **URL веб-сайта** - адрес сайта для анализа
- Анализ контента сайта происходит автоматически через OpenAI API
- Дополнительные поля не требуются

## Дополнительные правила

### Процесс работы
1. **Уточнить** - задать все необходимые вопросы о функционале
2. **Согласовать** - получить одобрение на каждый шаг
3. **Реализовать** - выполнить задачу только после согласования

### Технические требования
- **Платформа**: WordPress
- **Языки**: PHP (основной), JavaScript, CSS, HTML
- **API**: OpenAI ChatGPT API для генерации гипотез
- **База данных**: MySQL для хранения анализов
- **Безопасность**: WordPress nonce, валидация данных, защита от SQL-инъекций

### Структура проекта
```
business-hypothesis-generator/
├── business-hypothesis-generator.php    # Основной файл плагина
├── admin/
│   ├── admin-page.php                   # Главная админ страница
│   └── settings-page.php                # Настройки API ключей
├── assets/
│   ├── css/
│   │   ├── admin.css                    # Стили админки
│   │   └── frontend.css                 # Стили фронтенда
│   └── js/
│       ├── admin.js                     # JS для админки
│       └── frontend.js                  # JS для фронтенда
├── includes/
│   └── shortcode.php                    # Обработка шорткода
└── interface-prototype.html             # HTML прототип интерфейса
```

### AJAX обработчики
- `generate_business_hypothesis` - генерация гипотез
- `test_openai_api_key` - тестирование API ключа

### База данных
Таблица `wp_business_hypothesis_analyses`:
- `id` - уникальный идентификатор
- `website_url` - URL анализируемого сайта
- `hypotheses_data` - JSON с результатами анализа (5 гипотез)
- `created_at` - дата создания

**Примечание**: История анализов не сохраняется согласно требованиям

## Важно помнить
- НИКОГДА не создавать файлы без предварительного обсуждения
- ВСЕГДА запрашивать обратную связь на каждом этапе
- Работать итеративно: уточнить → согласовать → реализовать
- Следовать стандартам WordPress Codex
- Обеспечивать совместимость с версией WordPress на хостинге
- НЕ менять прототип если он был согласован
- Если нужно изменение в UI - предупредить об этом и спросить разрешение

## Специфичные требования для BusinessHypothesis Generator

### Пользовательский интерфейс
1. **Экран ввода данных**:
   - Поле "URL веб-сайта" (input)
   - Кнопка "Анализировать сайт"
   - Валидация URL в реальном времени

2. **Экран результатов**:
   - 5 карточек с гипотезами
   - Каждая карточка содержит: название, описание, метод тестирования, метрики успеха
   - Кнопка копирования для каждой гипотезы
   - Кнопка "Начать новый анализ"

### OpenAI API интеграция
- **Модель**: gpt-3.5-turbo
- **Задачи**: анализ веб-сайта и генерация бизнес-гипотез
- **Формат ответа**: JSON с 5 гипотезами
- **Обработка ошибок**: fallback на демо данные при необходимости

### Правило №7: Демо-режим
- Демо-режим ОБЯЗАТЕЛЬНО включен для тестирования интерфейса
- Демо данные должны быть реалистичными примерами гипотез
- Демо-режим активируется при отсутствии API ключа или по запросу
- Позволяет тестировать UI без реальных API вызовов

### Админ панель
- Поле для OpenAI API ключа
- Поле для настройки промпта генерации гипотез
- Кнопка тестирования API подключения
- Инструкции по использованию
- Демо-режим включен по умолчанию
